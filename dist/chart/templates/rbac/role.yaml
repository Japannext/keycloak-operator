{{- if .Values.rbac.enable }}
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    {{- include "chart.labels" . | nindent 4 }}
  name: keycloak-operator-manager-role
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - keycloak.japannext.co.jp
  resources:
  - keycloakclientprotocolmappers
  - keycloakclientrolemappings
  - keycloakclientroles
  - keycloakclients
  - keycloakclientscopeprotocolmappers
  - keycloakclientscopes
  - keycloakclusterendpoints
  - keycloakendpoints
  - keycloakldapfederations
  - keycloakldapmappers
  - keycloakrealmroles
  - keycloakrealms
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - keycloak.japannext.co.jp
  resources:
  - keycloakclientprotocolmappers/finalizers
  - keycloakclientrolemappings/finalizers
  - keycloakclientroles/finalizers
  - keycloakclients/finalizers
  - keycloakclientscopeprotocolmappers/finalizers
  - keycloakclientscopes/finalizers
  - keycloakclusterendpoints/finalizers
  - keycloakendpoints/finalizers
  - keycloakldapfederations/finalizers
  - keycloakldapmappers/finalizers
  - keycloakrealmroles/finalizers
  - keycloakrealms/finalizers
  verbs:
  - update
- apiGroups:
  - keycloak.japannext.co.jp
  resources:
  - keycloakclientprotocolmappers/status
  - keycloakclientrolemappings/status
  - keycloakclientroles/status
  - keycloakclients/status
  - keycloakclientscopeprotocolmappers/status
  - keycloakclientscopes/status
  - keycloakclusterendpoints/status
  - keycloakendpoints/status
  - keycloakldapfederations/status
  - keycloakldapmappers/status
  - keycloakrealmroles/status
  - keycloakrealms/status
  verbs:
  - get
  - patch
  - update
{{- end -}}
